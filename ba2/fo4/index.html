<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Fallout 4"><title>ba2::fo4 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="ba2" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0-nightly (d117b7f21 2024-12-31)" data-channel="nightly" data-search-js="search-036cda7a.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../ba2/index.html">ba2</a><span class="version">3.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module fo4</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#reading" title="Reading">Reading</a></li><li><a href="#writing" title="Writing">Writing</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate ba2</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">ba2</a></span><h1>Module <span>fo4</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/ba2/fo4/mod.rs.html#1-205">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Fallout 4</p>
<p><em>“Good morning! Vault-Tec calling! … You can’t begin to know how happy I am to finally speak with you. I’ve been trying for days. It’s a matter of utmost urgency, I assure you.”</em></p>
<p>This format is the latest iteration, having debuted with Fallout 4. It primarily uses zlib for compression, but Starfield has introduced lz4 into the mix. Unlike previous formats, texture files are now split into chunks to enable streaming mips at a more granular level.</p>
<h2 id="reading"><a class="doc-anchor" href="#reading">§</a>Reading</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>ba2::{
    fo4::{Archive, ArchiveKey, FileWriteOptions},
    prelude::<span class="kw-2">*</span>,
};
<span class="kw">use </span>std::{fs, path::Path};

<span class="kw">fn </span>example() -&gt; <span class="prelude-ty">Option</span>&lt;()&gt; {
    <span class="kw">let </span>path = Path::new(<span class="string">r"path/to/fallout4/Data/Fallout4 - Interface.ba2"</span>);
    <span class="kw">let </span>(archive, meta) = Archive::read(path).ok()<span class="question-mark">?</span>;
    <span class="kw">let </span>key: ArchiveKey = <span class="string">b"Interface/HUDMenu.swf"</span>.into();
    <span class="kw">let </span>file = archive.get(<span class="kw-2">&amp;</span>key)<span class="question-mark">?</span>;
    <span class="kw">let </span><span class="kw-2">mut </span>dst = fs::File::create(<span class="string">"HUDMenu.swf"</span>).ok()<span class="question-mark">?</span>;
    <span class="kw">let </span>options: FileWriteOptions = meta.into();
    file.write(<span class="kw-2">&amp;mut </span>dst, <span class="kw-2">&amp;</span>options).ok()<span class="question-mark">?</span>;
    <span class="prelude-val">Some</span>(())
}</code></pre></div>
<h2 id="writing"><a class="doc-anchor" href="#writing">§</a>Writing</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>ba2::{
    fo4::{Archive, ArchiveKey, ArchiveOptions, Chunk, File},
    prelude::<span class="kw-2">*</span>,
};
<span class="kw">use </span>std::fs;

<span class="kw">fn </span>example() -&gt; <span class="prelude-ty">Option</span>&lt;()&gt; {
    <span class="kw">let </span>chunk = Chunk::from_decompressed(<span class="string">b"Hello world!\n"</span>);
    <span class="kw">let </span>file: File = [chunk].into_iter().collect();
    <span class="kw">let </span>key: ArchiveKey = <span class="string">b"hello.txt"</span>.into();
    <span class="kw">let </span>archive: Archive = [(key, file)].into_iter().collect();
    <span class="kw">let </span><span class="kw-2">mut </span>dst = fs::File::create(<span class="string">"example.ba2"</span>).ok()<span class="question-mark">?</span>;
    <span class="kw">let </span>options = ArchiveOptions::default();
    archive.write(<span class="kw-2">&amp;mut </span>dst, <span class="kw-2">&amp;</span>options).ok()<span class="question-mark">?</span>;
    <span class="prelude-val">Some</span>(())
}</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Archive.html" title="struct ba2::fo4::Archive">Archive</a></div><div class="desc docblock-short">Represents the FO4 revision of the ba2 format.</div></li><li><div class="item-name"><a class="struct" href="struct.ArchiveKey.html" title="struct ba2::fo4::ArchiveKey">Archive<wbr>Key</a></div><div class="desc docblock-short">A key for indexing into the relevant mapping.</div></li><li><div class="item-name"><a class="struct" href="struct.ArchiveOptions.html" title="struct ba2::fo4::ArchiveOptions">Archive<wbr>Options</a></div><div class="desc docblock-short">Info about the contents of the given archive.</div></li><li><div class="item-name"><a class="struct" href="struct.ArchiveOptionsBuilder.html" title="struct ba2::fo4::ArchiveOptionsBuilder">Archive<wbr>Options<wbr>Builder</a></div><div class="desc docblock-short">See also <a href="struct.ArchiveOptions.html" title="struct ba2::fo4::ArchiveOptions"><code>ArchiveOptions</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.Chunk.html" title="struct ba2::fo4::Chunk">Chunk</a></div><div class="desc docblock-short">Represents a chunk of a file within the FO4 virtual filesystem.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkCompressionOptions.html" title="struct ba2::fo4::ChunkCompressionOptions">Chunk<wbr>Compression<wbr>Options</a></div><div class="desc docblock-short">Common parameters to configure how chunks are compressed.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkCompressionOptionsBuilder.html" title="struct ba2::fo4::ChunkCompressionOptionsBuilder">Chunk<wbr>Compression<wbr>Options<wbr>Builder</a></div><div class="desc docblock-short">See also <a href="struct.ChunkCompressionOptions.html" title="struct ba2::fo4::ChunkCompressionOptions"><code>ChunkCompressionOptions</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.DX10Header.html" title="struct ba2::fo4::DX10Header">DX10<wbr>Header</a></div><div class="desc docblock-short">File header for DX10 archives.</div></li><li><div class="item-name"><a class="struct" href="struct.File.html" title="struct ba2::fo4::File">File</a></div><div class="desc docblock-short">Represents a file within the FO4 virtual filesystem.</div></li><li><div class="item-name"><a class="struct" href="struct.FileCapacityError.html" title="struct ba2::fo4::FileCapacityError">File<wbr>Capacity<wbr>Error</a></div><div class="desc docblock-short">File is at chunk capacity.</div></li><li><div class="item-name"><a class="struct" href="struct.FileHash.html" title="struct ba2::fo4::FileHash">File<wbr>Hash</a></div><div class="desc docblock-short">See also <a href="struct.Hash.html" title="struct ba2::fo4::Hash"><code>Hash</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FileReadOptions.html" title="struct ba2::fo4::FileReadOptions">File<wbr>Read<wbr>Options</a></div><div class="desc docblock-short">Common parameters to configure how files are read.</div></li><li><div class="item-name"><a class="struct" href="struct.FileReadOptionsBuilder.html" title="struct ba2::fo4::FileReadOptionsBuilder">File<wbr>Read<wbr>Options<wbr>Builder</a></div><div class="desc docblock-short">See also <a href="struct.FileReadOptions.html" title="struct ba2::fo4::FileReadOptions"><code>FileReadOptions</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.FileWriteOptions.html" title="struct ba2::fo4::FileWriteOptions">File<wbr>Write<wbr>Options</a></div><div class="desc docblock-short">Common parameters to configure how files are written.</div></li><li><div class="item-name"><a class="struct" href="struct.FileWriteOptionsBuilder.html" title="struct ba2::fo4::FileWriteOptionsBuilder">File<wbr>Write<wbr>Options<wbr>Builder</a></div><div class="desc docblock-short">See also <a href="struct.FileWriteOptions.html" title="struct ba2::fo4::FileWriteOptions"><code>FileWriteOptions</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.GNMFHeader.html" title="struct ba2::fo4::GNMFHeader">GNMF<wbr>Header</a></div><div class="desc docblock-short">File header for GNMF archives.</div></li><li><div class="item-name"><a class="struct" href="struct.Hash.html" title="struct ba2::fo4::Hash">Hash</a></div><div class="desc docblock-short">The underlying hash object used to uniquely identify objects within the archive.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CompressionFormat.html" title="enum ba2::fo4::CompressionFormat">Compression<wbr>Format</a></div><div class="desc docblock-short">A list of all compression methods supported by the ba2 format.</div></li><li><div class="item-name"><a class="enum" href="enum.CompressionLevel.html" title="enum ba2::fo4::CompressionLevel">Compression<wbr>Level</a></div><div class="desc docblock-short">Specifies the compression level to use when compressing data.</div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum ba2::fo4::Error">Error</a></div></li><li><div class="item-name"><a class="enum" href="enum.FileHeader.html" title="enum ba2::fo4::FileHeader">File<wbr>Header</a></div><div class="desc docblock-short">Optionally present file header.</div></li><li><div class="item-name"><a class="enum" href="enum.Format.html" title="enum ba2::fo4::Format">Format</a></div><div class="desc docblock-short">Represents the file format for an archive.</div></li><li><div class="item-name"><a class="enum" href="enum.Version.html" title="enum ba2::fo4::Version">Version</a></div><div class="desc docblock-short">Indicates the version of an archive.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.hash_file.html" title="fn ba2::fo4::hash_file">hash_<wbr>file</a></div><div class="desc docblock-short">Produces a hash using the given path.</div></li><li><div class="item-name"><a class="fn" href="fn.hash_file_in_place.html" title="fn ba2::fo4::hash_file_in_place">hash_<wbr>file_<wbr>in_<wbr>place</a></div><div class="desc docblock-short">Produces a hash using the given path.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type ba2::fo4::Result">Result</a></div></li></ul></section></div></main></body></html>